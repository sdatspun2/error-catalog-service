# Error Discovery Service

Error Discovery Service provides API with operations to discover and manage metadata related for errors emitted by APIs. 

### Terms Used

#### API
[API](https://en.wikipedia.org/wiki/API) is a computing interface which defines interactions between multiple software intermediaries. It defines the kinds of calls or requests that can be made, how to make them, the data formats that should be used, the conventions to follow, etc. 

#### Domain
According to Wikipedia, a domain model is a system of abstractions that describes selected aspects of a sphere of knowledge, influence, or activity. The concepts include the data involved in a business, and the rules that the business uses in relation to that data. As an example, a fintech domain model includes domains such as Payment, Risk, Compliance, Identity, Customer Support, etc.

#### Microservice 
Microservices (aka Service) provide a generic API for accessing and manipulating the value set of a resource, regardless of how the membership function is defined or the type of software that is handling the request.

#### Resource

The key abstraction of information in REST is a resource. A [resource](https://github.com/paypal/api-standards/blob/master/api-style-guide.md#resource) is a conceptual mapping to a set of entities, not the entity that corresponds to the mapping at any particular point in time. More precisely, a resource R is a temporally varying membership function MR(t), that for time t maps to a set of entities, or values, that are equivalent. The values in the set may be resource representations and/or resource identifiers.


### Need

Following are some of the reasons to use Error Discovery Service.

#### Externalize error messages

Often error messages written by API developers make a lot of assumptions about the context and the audience. It is hard to change such error messages if these are hardcoded in implementation of services exposing APIs. For example, to change a message from "Add Card refused due to compliance guidelines" to "Could not add card due to failure to comply with guideline %s", a developer has to make change(s) in the service code and redeploy the service emitting that error.

#### Service interface language specification does not accommodate error details 

The [OpenAPI](https://swagger.io/specification/) Specification (OAS) defines a standard, language-agnostic interface to RESTful APIs which allows both humans and computers to discover and understand the capabilities of the service without access to source code, documentation, or through network traffic inspection. When properly defined, a consumer can understand and interact with the remote service with a minimal amount of implementation logic. However, this specification stops short of defining a list of errors that various operations of the service interface may emit in case of error scenarios.


#### Keep service's implementation and the API documentation in sync with regards to errors

API consumers should be able to refer with confidence the API's documentation for errors generated by the services. This helps to reduce the cost and the time spent supporting an API and increases adoptability of the API.

#### Localize the error message strings 
If error related strings such as message, description, actions to take, etc. are externalized, it is easy for the documentation and an internationalization teams to modify and localize these without any help from the service developers and without requiring redeployment of the services.

### Use Cases

1. Microservices providing APIs can retrieve error metadata from Error Discovery Service instead of hard-coding.
2. API Portal can show catalog of errors associated with APIs using the Error Discovery Service.
3. Automation tests for API can verify errors sent by services against the API contract using Error Discovery Service.

Resources of Error Discovery Service

1. Error Catalog
2. Error Metadata

### Error Catalog
An Error Catalog contains a collection of error metadata for a namespace such as `payments`, `compliance`, `identity`, etc. in a business domain. Error metadata includes error identifier, error message and related links among other things. For a specific error catalog, there should be exactly one instance, known as the top-level catalog, which could be in English for example. There should be corresponding language-specific catalogs as needed.

### Error Metadata


## Credit
1. [Error Catalog PayPal Design Guidelines](https://github.com/paypal/api-standards/blob/master/api-style-guide.md#error-catalog)
